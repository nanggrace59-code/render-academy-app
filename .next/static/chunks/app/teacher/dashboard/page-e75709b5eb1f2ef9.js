(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{8914:function(e,t,s){Promise.resolve().then(s.bind(s,193))},193:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(3827),n=s(4090),a=s(7907),i=s(1708),l=s(7461);/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,l.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),o=(0,l.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var u=s(8998),d=s(1213),m=s(7805);function x(){let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)("master_class"),x=(0,a.useRouter)();(0,n.useEffect)(()=>{Promise.all([(0,i.uH)(),(0,i.Gm)()]).then(e=>{let[s,r]=e;t(s.map(e=>{let t=r.filter(t=>t.student_id===e.id),s=t.some(e=>"pending"===e.status),n=t.find(e=>"pending"===e.status)||t.sort((e,t)=>(t.assignment_number||0)-(e.assignment_number||0))[0];return{...e,has_pending:s,latest_submission:n}}))})},[]);let h=e.filter(e=>e.enrolled_class===s||!e.enrolled_class);return(0,r.jsx)("div",{className:"min-h-screen bg-[#050505] text-white font-sans p-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsx)("div",{className:"flex justify-between items-end mb-10",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-light mb-2",children:"Teacher Dashboard"}),(0,r.jsx)("p",{className:"text-neutral-500 font-mono text-sm",children:"MANAGE STUDENT PROGRESS"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1 mb-6 border-b border-neutral-800",children:[(0,r.jsx)("button",{onClick:()=>l("master_class"),className:"px-6 py-4 text-xs font-bold uppercase tracking-widest border-b-2 transition-all ".concat("master_class"===s?"border-red-600 text-white bg-neutral-900/50":"border-transparent text-neutral-500 hover:text-white hover:bg-neutral-900/30"),children:"Master Class Architecture Modeling"}),(0,r.jsx)("button",{onClick:()=>l("viz_class"),className:"px-6 py-4 text-xs font-bold uppercase tracking-widest border-b-2 transition-all ".concat("viz_class"===s?"border-red-600 text-white bg-neutral-900/50":"border-transparent text-neutral-500 hover:text-white hover:bg-neutral-900/30"),children:"Visualization Class"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[(0,r.jsxs)("div",{className:"bg-neutral-900 border border-neutral-800 p-6",children:[(0,r.jsx)("h3",{className:"text-neutral-500 text-xs font-mono uppercase mb-2",children:"Pending Reviews"}),(0,r.jsx)("p",{className:"text-4xl font-light text-amber-500",children:h.filter(e=>e.has_pending).length})]}),(0,r.jsxs)("div",{className:"bg-neutral-900 border border-neutral-800 p-6",children:[(0,r.jsx)("h3",{className:"text-neutral-500 text-xs font-mono uppercase mb-2",children:"Class Enrollment"}),(0,r.jsx)("p",{className:"text-4xl font-light text-white",children:h.length})]})]}),(0,r.jsxs)("div",{className:"bg-neutral-900 border border-neutral-800 min-h-[400px]",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-neutral-800 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"font-mono text-sm text-neutral-400 uppercase",children:"Student Roster"}),(0,r.jsx)(c,{className:"text-neutral-600",size:18})]}),0===h.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-600",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-neutral-800 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(o,{size:32})}),(0,r.jsx)("p",{className:"text-lg",children:"No students enrolled in this class."}),(0,r.jsx)("p",{className:"text-sm font-mono mt-2",children:"Check the other class tab."})]}):(0,r.jsx)("div",{className:"divide-y divide-neutral-800",children:h.map(e=>(0,r.jsxs)("div",{onClick:()=>e.latest_submission&&x.push("/teacher/grading/".concat(e.latest_submission.id)),className:"p-6 flex items-center justify-between transition-colors ".concat(e.latest_submission?"hover:bg-neutral-800/50 cursor-pointer group":"opacity-50 cursor-default"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.has_pending?"bg-amber-900/30 text-amber-500 border border-amber-500/30":"bg-neutral-800 text-neutral-500"),children:e.has_pending?(0,r.jsx)(u.Z,{size:20}):(0,r.jsx)(d.Z,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-lg text-neutral-200",children:e.full_name||e.email}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-neutral-500 font-mono mt-1",children:[(0,r.jsxs)("span",{className:"bg-neutral-800 px-2 py-0.5 rounded-sm",children:["LVL ",e.current_level]}),(0,r.jsx)("span",{children:e.email})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[e.latest_submission?(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm text-neutral-300",children:["Assignment ",e.latest_submission.assignment_number]}),(0,r.jsx)("p",{className:"text-xs uppercase font-bold tracking-wide ".concat("pending"===e.latest_submission.status?"text-amber-500":"approved"===e.latest_submission.status?"text-emerald-500":"text-red-500"),children:e.latest_submission.status})]}):(0,r.jsx)("div",{className:"text-right text-neutral-600 text-xs font-mono uppercase",children:"No Submissions"}),e.latest_submission&&(0,r.jsx)(m.Z,{className:"text-neutral-600 group-hover:text-white transition-colors",size:20})]})]},e.id))})]})]})})}},8998:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7805:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1213:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1708:function(e,t,s){"use strict";s.d(t,{F:function(){return m},Gm:function(){return o},Kf:function(){return d},Mb:function(){return u},uH:function(){return c},un:function(){return l},x4:function(){return i}});var r=s(7014);let n=e=>new Promise((t,s)=>{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=e=>s(e)}),a=e=>({...e,references:e.ref_interior_url&&e.ref_exterior_url?{interior:e.ref_interior_url,exterior:e.ref_exterior_url}:void 0}),i=async e=>{let{data:t,error:s}=await r.O.from("profiles").select("*").eq("email",e).single();return s||!t?null:a(t)},l=async(e,t,s)=>{try{let i={};if(t){let e=await n(t);i.ref_interior_url=e}if(s){let e=await n(s);i.ref_exterior_url=e}let{data:l,error:c}=await r.O.from("profiles").update(i).eq("id",e).select().single();if(c)return console.error("Upload Error:",c.message),null;return a(l)}catch(e){return console.error("Unexpected Error:",e),null}},c=async()=>{let{data:e}=await r.O.from("profiles").select("*").eq("role","student");return(null==e?void 0:e.map(a))||[]},o=async()=>{let{data:e}=await r.O.from("submissions").select("*");return e||[]},u=async e=>{let{data:t}=await r.O.from("submissions").select("*").eq("student_id",e);return t||[]},d=async(e,t,s,a,i)=>{let l=a?await n(a):"https://via.placeholder.com/800",{error:c}=await r.O.from("submissions").insert({student_id:e,assignment_number:t,reference_image_url:s,render_image_url:l,status:"pending",student_message:i,created_at:new Date().toISOString()});return c&&console.error("Submit Error:",c.message),!c},m=async()=>{let{data:e}=await r.O.from("submissions").select("*").eq("status","approved");return e||[]}},7014:function(e,t,s){"use strict";s.d(t,{O:function(){return l}});var r=s(7688),n=s(9079);let a=n.env.NEXT_PUBLIC_SUPABASE_URL,i=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,l=(0,r.eI)(a,i)}},function(e){e.O(0,[530,971,69,744],function(){return e(e.s=8914)}),_N_E=e.O()}]);